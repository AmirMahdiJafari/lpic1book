<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./theme/css/elegant.prod.9e9d5ce754.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/custom.css" media="screen">

        <link rel="dns-prefetch" href="//fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin>

        <meta name="author" content="Jadi" />

        <meta property="og:type" content="article" />
        <meta name="twitter:card" content="summary">

<meta name="keywords" content="LPIC1, 101, LPIC1-101-500, LPIC1, " />

<meta property="og:title" content="103.4 Use streams, pipes and redirects "/>
<meta property="og:url" content="./1034-use-streams-pipes-and-redirects.html" />
<meta property="og:description" content="" />
<meta property="og:site_name" content="lpic1book" />
<meta property="og:article:author" content="Jadi" />
<meta property="og:article:published_time" content="2010-12-03T10:20:00+01:00" />
<meta name="twitter:title" content="103.4 Use streams, pipes and redirects ">
<meta name="twitter:description" content="">

        <title>103.4 Use streams, pipes and redirects  Â· lpic1book
</title>



        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-4CZV14VZXW"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-4CZV14VZXW');
        </script>
        
    </head>
    <body>
        <div id="content">
            <div class="navbar navbar-static-top">
                <div class="navbar-inner">
                    <div class="container-fluid">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="./"><span class=site-name>lpic1book</span></a>
                        <div class="nav-collapse collapse">
                            <ul class="nav pull-right top-menu">
                                <li >
                                </li>
                                <li ><a href="./">Home</a></li>
                                <li ><a href="./support">Support/Donate</a></li>
                                <li ><a href="./archives.html">Chapters</a></li>
                                <li ><a href="./tags.html">Tags</a></li>

                                <li><form class="navbar-search" action="./search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row-fluid">
                    <div class="span1"></div>
                    <div class="span10">
<article itemscope>
<div class="row-fluid">
    <header class="page-header span10 offset2">
        <h1>
            <a href="./1034-use-streams-pipes-and-redirects.html">
                103.4 Use streams, pipes and redirects
            </a>
        </h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">
            
            <ul>
<li>Candidates should be able to redirect streams and connect them in order to efficiently process textual data. Tasks include redirecting standard input, standard output and standard error, piping the output of one command to the input of another command, using the output of one command as arguments to another command and sending output to both stdout and a file.</li>
</ul>
<h3>Objectives</h3>
<ul>
<li>Redirecting standard input, standard output and standard error.</li>
<li>Pipe the output of one command to the input of another command.</li>
<li>Use the output of one command as arguments to another command.</li>
<li>Send output to both stdout and a file.</li>
<li>tee</li>
<li>xargs</li>
</ul>
<p>We've already talked about basics of piping and redirects in previous sections. Here you will get a deeper understanding of these concepts.</p>
<h3>Redirecting standard IO</h3>
<p>On a linux system most shells use streams for input and output (a list of characters). . These streams can be from (and toward) various things including keyboard, block devices (hards, usb stick, ..), window of a program, fiels, ...</p>
<ol>
<li><em>stdout</em> is the standard output stream, which displays output from commands (file descriptor 1)</li>
<li><em>stderr</em> is the standard error stream, which displays error output from commands (file descriptor 2)</li>
<li><em>stdin</em> is the standard input stream, which provides input to commands (file descriptor 0)</li>
</ol>
<p>What are these <strong>file descriptions</strong>? There are used to control the output. If you need to control where your output goes, you can add <code>n&gt;</code> or <code>n&gt;&gt;</code>.</p>
<ul>
<li><strong>n&gt;</strong> redirects <strong>file description n</strong> to a file or device. If the file already exists it is <strong>overwritten</strong> and if it does not exists, it will be created.</li>
<li><strong>n&gt;&gt;</strong> redirects file description n to a file or device. If the file already exists the stream will be appended to the end of it and if it does not exists, it will be created.</li>
</ul>
<blockquote>
<p>if the <strong>n</strong> is not given, the default is <em>standard output</em></p>
<p>The user who runs the command should have write access to the file.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>$ ls
fiona  habib  mahmoodrm  minoo    mojtaba  sina
$ ls j*
ls: cannot access j*: No such file or directory
$ ls m*
mahmoodrm  minoo  mojtaba
$ ls j* m*
ls: cannot access j*: No such file or directory
mahmoodrm  minoo  mojtaba
$ ls j* m* &gt; output 2&gt; errors
$ cat output
mahmoodrm
minoo
mojtaba
$ cat errors
ls: cannot access j*: No such file or directory
$
</code></pre></div>

<p><strong>Redirecting both stdout and stderr to one location</strong></p>
<p>Sometimes (say during automated tasks) we prefer to send both standard output and standard error to same place, Use <code>&amp;&gt;</code> and <code>&amp;&gt;&gt;</code> to say <em>both stderr and stdout</em>.</p>
<p>It is also possible to use <code>&amp;1</code> and <code>&amp;2</code> and <code>&amp;0</code> to refer to <strong>current place</strong> of stdout, stderr &amp; stdin. In this case <code>ls &gt; file1 2&gt;&amp;1</code> means <em>redirect output to file1 and output stderr to same place as stdout (file1)</em></p>
<blockquote>
<p>Be careful! <code>ls 2&gt;&amp;1 &gt; file1</code> means <em>print stderr to current location of stdout (screen) and then change the stdout to file1</em></p>
</blockquote>
<p><strong>sending to null</strong></p>
<p>In linux, <strong>/dev/null</strong> is like a trash-can. You can send anything there and it disappears. So it is normal to say:</p>
<div class="highlight"><pre><span></span><code>$ ls j* m* &gt; file1
ls: cannot access j*: No such file or directory
$ ls j* m* &gt; file1 2&gt;/dev/null
$ cat file1
mahmoodrm
minoo
mojtaba
$
</code></pre></div>

<h3>redirecting input</h3>
<p>The <strong>&lt;</strong> operand redirects the input.</p>
<div class="highlight"><pre><span></span><code>$ cat uses
you fedora
jadi ubuntu
rubic windows
neda mac
narsin arch
$ tr &#39; &#39; &#39;,&#39; &lt; uses
you,fedora
jadi,ubuntu
rubic,windows
neda,mac
narsin,arch
</code></pre></div>

<h4>here-documents</h4>
<p>Many shells, have here-documents (also called here-docs) as a way of input. You use <code>&lt;&lt;</code> and a <code>WORD</code> and then whatever you input is considered stdin till you give only the WORD in one line.</p>
<div class="highlight"><pre><span></span><code>$ tr &#39; &#39; &#39;.&#39; &lt;&lt; END_OF_DATA
&gt; this is a line
&gt; and then this
&gt;
&gt; we&#39;ll still type
&gt; and,
&gt; done!
&gt; END_OF_DATA
this.is.a.line
and.then.this

we&#39;ll.still.type
and,
done!
</code></pre></div>

<blockquote>
<p>Here-Documnts are very useful if you are writing scripts and automated tasks.</p>
</blockquote>
<h3>Pipes</h3>
<p>Piping is sending one commands output to another commands input (Piping the stdout to stdin). You use <code>|</code> for this task.</p>
<blockquote>
<p>As previously seen, many commands use a hyphen <code>-</code> in place of a filename as an argument to indicate when the input should come from stdin rather than a file.</p>
</blockquote>
<div class="highlight"><pre><span></span><code>$ cat what_i_have.txt
laptop
socks
tshirt
ball
socks
glasses
$ cut -f1 -d&#39; &#39; what_i_have.txt | sort | uniq -c | sort -nr
      2 socks
      1 tshirt
      1 laptop
      1 glasses
      1 ball
</code></pre></div>

<blockquote>
<p>If you need to start your pipeline with the contents of a file, start with <code>cat filename | ...</code> or use a <code>&lt;</code> stdin redirect.</p>
</blockquote>
<h3>xargs</h3>
<p>This command reads input from <em>stdin</em> and uses them as arguments.</p>
<div class="highlight"><pre><span></span><code>$ ls | xargs echo these are files:
these are files: errors f file1 fiona habib mahmoodrm minoo mojtaba output output.txt sina uses what_i_have.txt
</code></pre></div>

<blockquote>
<p>if you do not give any command to the <code>xargs</code> , the echo will be the default command (it will show the stdin).</p>
</blockquote>
<p>Have in mind that xargs breaks input based on blanks and use any part as an argument. You can limit the number of arguments with <code>--max-args</code> (same as <code>-n</code>) switch and escape blanks or quote them to prevent them from breaking.</p>
<p>One important switch is -I. This is useful if you need to pass stdin arguments in the middle (or even start) of your commands. use the form <code>xargs -I SOMETHING echo here is SOMETHING end</code>:</p>
<div class="highlight"><pre><span></span><code>$ cat what_i_have.txt
laptop
socks
tshirt
ball
socks
glasses
$ cat what_i_have.txt | xargs -I DATA echo I have DATA and I love it.
I have laptop and I love it.
I have socks and I love it.
I have tshirt and I love it.
I have ball and I love it.
I have socks and I love it.
I have glasses and I love it.
</code></pre></div>

<blockquote>
<p>If you use -L, the input will break by line and not by blanks.</p>
</blockquote>
<h3>tee</h3>
<p>What if you need to see the output on screen and also save it to a file? Ugly way is redirecting to the file and using <code>tail -f file</code> in another window. Nice way is using <code>tee</code> and giving it one or more filenames for standard output (if you need to save <em>stderr</em>, first redirect it to <em>stdout</em>). This will write the output to those files and also writes them to the screen:</p>
<div class="highlight"><pre><span></span><code>$ ls -1 | tee allfiles myfiles
allfiles
f
fiona
habib
mahmoodrm
minoo
mojtaba
myfiles
sina
</code></pre></div>

<blockquote>
<p>if you want to prevent overwriting files, use the <code>-a</code> switch to append to files if exists.</p>
</blockquote>


             
 
            
            
            







            <hr/>
        </div>
        <section id="article-sidebar" class="span2">
            <h4>Published</h4>
            <time itemprop="dateCreated" datetime="2010-12-03T10:20:00+01:00">Fri 03 December 2010</time>
            <h4>Category</h4>
            <a class="category-link" href="./categories.html#lpic1-ref">LPIC1</a>
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article">
                <li><a href="./tags.html#101-ref">101
                    <span class="superscript">38</span>
</a></li>
                <li><a href="./tags.html#lpic1-ref">LPIC1
                    <span class="superscript">42</span>
</a></li>
                <li><a href="./tags.html#lpic1-101-500-ref">LPIC1-101-500
                    <span class="superscript">41</span>
</a></li>
            </ul>
<h4>Contact</h4>
<div id="sidebar-social-link">
</div>
            





            





        </section>
</div>
</article>
<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe.
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides.
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo https://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>                    </div>
                    <div class="span1"></div>
                </div>
            </div>
        </div>
<footer>




    <div id="fpowered">
        Powered by: <a href="http://getpelican.com/" title="Pelican Home Page" target="_blank" rel="nofollow noopener noreferrer">Pelican</a>
        Theme: <a href="https://elegant.oncrashreboot.com/" title="Theme Elegant Home Page" target="_blank" rel="nofollow noopener noreferrer">Elegant</a>
    </div>
</footer>            <script src="//code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
        <script src="./theme/js/elegant.prod.9e9d5ce754.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

    <script>
    (function () {
        if (window.location.hash.match(/^#comment-\d+$/)) {
            $('#comment_thread').collapse('show');
        }
    })();
    window.onhashchange=function(){
        if (window.location.hash.match(/^#comment-\d+$/))
            window.location.reload(true);
    }
    $('#comment_thread').on('shown', function () {
        var link = document.getElementById('comment-accordion-toggle');
        var old_innerHTML = link.innerHTML;
        $(link).fadeOut(200, function() {
            $(this).text('Click here to hide comments').fadeIn(200);
        });
        $('#comment_thread').on('hidden', function () {
            $(link).fadeOut(200, function() {
                $(this).text(old_innerHTML).fadeIn(200);
            });
        })
    })
</script>

    </body>
    <!-- Theme: Elegant built for Pelican
        License : MIT -->
</html>